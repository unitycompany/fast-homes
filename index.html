<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <!-- Meta Tags Essenciais -->
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>Fast Homes | Casas Pr√© Fabricadas</title>

    <!-- SEO -->
    <meta name="author" content="Aleph Silva Ramos" />
    <meta name="description" content="Fast Homes oferece casas pr√©-fabricadas sustent√°veis, eficientes e personaliz√°veis para atender √†s suas necessidades de moradia moderna." />
    <meta name="keywords" content="casas modulares, constru√ß√£o sustent√°vel, casas pr√©-fabricadas, efici√™ncia energ√©tica, design moderno" />
    <meta name="robots" content="index, follow" />

    <!-- Personaliza√ß√£o do Tema -->
    <meta name="theme-color" content="#ffffff" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="default" />
    <meta name="apple-mobile-web-app-title" content="Fast Homes" />

    <!-- Open Graph (Facebook, LinkedIn) -->
    <meta property="og:title" content="Fast Homes | Pr√© Fabricadas" />
    <meta property="og:description" content="Descubra as vantagens das casas pr√©-fabricadas da Fast Homes: sustentabilidade, efici√™ncia e design moderno." />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://www.fasthomes.com.br" />
    <meta property="og:image" content="/favicon-fast-homes.png" />
    <meta property="og:site_name" content="Fast Homes" />
    <meta property="og:locale" content="pt-BR" />

    <!-- Twitter Cards -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Fast Homes | Pr√© Fabricadas" />
    <meta name="twitter:description" content="Explore as casas pr√©-fabricadas sustent√°veis da Fast Homes e transforme sua ideia de moradia." />
    <meta name="twitter:image" content="https://www.fasthomes.com/images/twitter-card.jpg" />
    <meta name="twitter:site" content="@fasthomes" />
    <meta name="twitter:creator" content="@fasthomes" />

    <!-- Favicon e √çcones -->
    <link rel="icon" href="/favicon-fast-homes.png" type="image/x-png" />
    <link rel="apple-touch-icon" href="/apple-touch-icon.png" />
    <link rel="manifest" href="/site.webmanifest" />

    <!-- URL Can√¥nica -->
    <link rel="canonical" href="https://www.fasthomes.com.br" />

    <!-- GTM da Fast Homes -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-5CPRCPM2');</script>
  </head>

  <body>
    <script>
      console.log("üìù index.html carregado em:", window.location.pathname);
    </script>


    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5CPRCPM2"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager¬†(noscript)¬†-->

    <script>
      (function() {
          console.log("üìå UTM Debugging Script Iniciado");

          let urlParams = new URLSearchParams(window.location.search);
          let utmKeys = ["utm_source", "utm_medium", "utm_campaign", "utm_term", "utm_content"];
          let utmData = {};
          let hasUtmInUrl = utmKeys.some(key => urlParams.has(key));

          localStorage.removeItem("utm_params");
          localStorage.removeItem("utm_session");

          if (hasUtmInUrl) {
              console.log("‚úÖ UTM detectadas na URL!");

              // Salva as UTM no localStorage
              utmKeys.forEach(key => {
                  if (urlParams.has(key)) {
                      utmData[key] = urlParams.get(key);
                  }
              });

              localStorage.setItem("utm_params", JSON.stringify(utmData));
              localStorage.setItem("utm_session", "true"); // Indica que a sess√£o iniciou com UTM
              console.log("üì• UTM salvas no localStorage:", utmData);
          } else {
              console.log("‚ö†Ô∏è Nenhuma UTM detectada. Rodando site normalmente.");
          }

          let storedUtm = localStorage.getItem("utm_params");
          let sessionStartedWithUtm = localStorage.getItem("utm_session") === "true";

          if (storedUtm && sessionStartedWithUtm) {
              storedUtm = JSON.parse(storedUtm);
              console.log("üì§ UTM recuperadas do localStorage:", storedUtm);

              let currentUrl = new URL(window.location.href);
              let hasUtm = utmKeys.some(key => currentUrl.searchParams.has(key));

              if (!hasUtm) {
                  Object.keys(storedUtm).forEach(param => currentUrl.searchParams.set(param, storedUtm[param]));
                  window.history.replaceState({}, "", currentUrl.toString());
                  console.log("‚ôªÔ∏è UTM reaplicadas na URL atual:", currentUrl.toString());
              }

              document.querySelectorAll("a").forEach(link => {
                  if (link.hostname === window.location.hostname && !link.href.includes("utm_")) {
                      let url = new URL(link.href);
                      Object.keys(storedUtm).forEach(param => url.searchParams.set(param, storedUtm[param]));
                      link.href = url.toString();
                      console.log("üîó Link atualizado com UTM:", link.href);
                  }
              });

              document.addEventListener("click", function(e) {
                  let link = e.target.closest("a");
                  if (link && link.hostname === window.location.hostname && !link.href.includes("utm_")) {
                      let url = new URL(link.href);
                      Object.keys(storedUtm).forEach(param => url.searchParams.set(param, storedUtm[param]));

                      console.log("‚û°Ô∏è Redirecionando com UTM:", url.toString());

                      e.preventDefault();
                      window.location.href = url.toString();
                  }
              });
          } else {
              console.log("üö´ Nenhuma UTM armazenada ou sess√£o come√ßou sem UTM. Site rodando normalmente.");
          }
      })();
      </script>
    
    <div id="root"></div>
    <div id="modal-root"></div>
    <script type="module" src="/src/main.jsx"></script>
  </body>
  
</html>
